<!-- @format -->

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>API Routing in Next.js - Interactive Guide</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div class="container">
      <header class="hero">
        <div class="hero-content">
          <h1>ğŸ›£ï¸ API Routing in Next.js</h1>
          <p class="subtitle">
            Create powerful backend endpoints directly in your Next.js app!
          </p>
          <div class="hero-stats">
            <div class="stat-card">
              <div class="stat-number">No Server</div>
              <div class="stat-label">Needed!</div>
            </div>
            <div class="stat-card">
              <div class="stat-number">Full-Stack</div>
              <div class="stat-label">In one app</div>
            </div>
            <div class="stat-card">
              <div class="stat-number">Easy</div>
              <div class="stat-label">to deploy</div>
            </div>
          </div>
        </div>
      </header>

      <nav class="tab-navigation">
        <button class="tab-btn active" onclick="showTab('basics')">
          ğŸ“š Basics
        </button>
        <button class="tab-btn" onclick="showTab('methods')">
          ğŸ”§ HTTP Methods
        </button>
        <button class="tab-btn" onclick="showTab('examples')">
          ğŸ’¡ Examples
        </button>
        <button class="tab-btn" onclick="showTab('testing')">ğŸ§ª Testing</button>
      </nav>

      <div class="content">
        <!-- Basics Tab -->
        <div id="basics" class="tab-content active">
          <h2>ğŸ“š What is API Routing?</h2>

          <div class="info-card">
            <h3>ğŸ¯ Simple Definition</h3>
            <p>
              <strong>API Routing</strong> in Next.js lets you create backend
              endpoints (mini servers) directly inside your Next.js app. No need
              for a separate Express server!
            </p>
          </div>

          <div class="visual-comparison">
            <h3>Traditional vs Next.js</h3>
            <div class="comparison-grid">
              <div class="comparison-box traditional">
                <h4>âŒ Traditional Setup</h4>
                <div class="flow-diagram">
                  <div class="flow-item">
                    <span class="icon">âš›ï¸</span>
                    <span>React Frontend</span>
                    <span class="port">Port 3000</span>
                  </div>
                  <div class="arrow">â†’</div>
                  <div class="flow-item">
                    <span class="icon">ğŸš‚</span>
                    <span>Express Server</span>
                    <span class="port">Port 5000</span>
                  </div>
                  <div class="arrow">â†’</div>
                  <div class="flow-item">
                    <span class="icon">ğŸ—„ï¸</span>
                    <span>Database</span>
                    <span class="port">MongoDB</span>
                  </div>
                </div>
                <p class="note">Three separate applications!</p>
              </div>

              <div class="comparison-box nextjs">
                <h4>âœ… Next.js API Routes</h4>
                <div class="flow-diagram">
                  <div class="flow-item large">
                    <span class="icon">âš¡</span>
                    <span>Next.js (Frontend + Backend)</span>
                    <span class="port">Port 3000</span>
                  </div>
                  <div class="arrow">â†’</div>
                  <div class="flow-item">
                    <span class="icon">ğŸ—„ï¸</span>
                    <span>Database</span>
                    <span class="port">MongoDB</span>
                  </div>
                </div>
                <p class="note">All in one application!</p>
              </div>
            </div>
          </div>

          <div class="file-structure">
            <h3>ğŸ“ File Structure</h3>
            <div class="folder-tree">
              <div class="folder">
                <span class="folder-icon">ğŸ“</span> my-app/
                <div class="folder-content">
                  <div class="folder">
                    <span class="folder-icon">ğŸ“</span> pages/
                    <div class="folder-content">
                      <div class="folder api-folder">
                        <span class="folder-icon">ğŸ“</span> api/
                        <span class="badge">Backend!</span>
                        <div class="folder-content">
                          <div class="file">
                            <span class="file-icon">ğŸ“„</span> hello.js
                            <span class="route">â†’ /api/hello</span>
                          </div>
                          <div class="file">
                            <span class="file-icon">ğŸ“„</span> users.js
                            <span class="route">â†’ /api/users</span>
                          </div>
                          <div class="folder">
                            <span class="folder-icon">ğŸ“</span> products/
                            <div class="folder-content">
                              <div class="file">
                                <span class="file-icon">ğŸ“„</span> [id].js
                                <span class="route">â†’ /api/products/123</span>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="file">
                        <span class="file-icon">ğŸ“„</span> index.js
                        <span class="route">Frontend page</span>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="first-api">
            <h3>ğŸš€ Your First API Route</h3>

            <div class="code-example">
              <div class="code-header">
                <span class="code-file">pages/api/hello.js</span>
                <button class="copy-btn" onclick="copyCode(this)">
                  ğŸ“‹ Copy
                </button>
              </div>
              <pre><code>// This runs on the SERVER!
export default function handler(req, res) {
  res.status(200).json({ 
    message: 'Hello from API!',
    timestamp: new Date().toISOString()
  });
}

// Visit: http://localhost:3000/api/hello</code></pre>
            </div>

            <div class="code-example">
              <div class="code-header">
                <span class="code-file">Response (JSON)</span>
              </div>
              <pre><code>{
  "message": "Hello from API!",
  "timestamp": "2025-10-07T10:30:00.000Z"
}</code></pre>
            </div>
          </div>

          <div class="key-concepts">
            <h3>ğŸ”‘ Key Concepts</h3>
            <div class="concept-grid">
              <div class="concept-card">
                <div class="concept-icon">ğŸ“¥</div>
                <h4>req (Request)</h4>
                <p>Incoming data from user</p>
                <ul>
                  <li>req.method â†’ GET, POST, etc.</li>
                  <li>req.body â†’ Data sent</li>
                  <li>req.query â†’ URL parameters</li>
                </ul>
              </div>
              <div class="concept-card">
                <div class="concept-icon">ğŸ“¤</div>
                <h4>res (Response)</h4>
                <p>What you send back</p>
                <ul>
                  <li>res.status(200) â†’ Success</li>
                  <li>res.json({}) â†’ Send JSON</li>
                  <li>res.send() â†’ Send text</li>
                </ul>
              </div>
            </div>
          </div>
        </div>

        <!-- HTTP Methods Tab -->
        <div id="methods" class="tab-content">
          <h2>ğŸ”§ HTTP Methods</h2>

          <div class="method-cards">
            <div class="method-card get">
              <div class="method-header">
                <span class="method-badge">GET</span>
                <h3>Retrieve Data</h3>
              </div>
              <p>Fetch data from server (like reading a book)</p>

              <div class="code-example">
                <div class="code-header">
                  <span class="code-file">pages/api/users.js</span>
                  <button class="copy-btn" onclick="copyCode(this)">
                    ğŸ“‹ Copy
                  </button>
                </div>
                <pre><code>export default function handler(req, res) {
  if (req.method === 'GET') {
    const users = [
      { id: 1, name: 'Alice' },
      { id: 2, name: 'Bob' }
    ];
    
    res.status(200).json(users);
  }
}</code></pre>
              </div>

              <div class="usage-example">
                <strong>Frontend Usage:</strong>
                <pre><code>const response = await fetch('/api/users');
const users = await response.json();</code></pre>
              </div>
            </div>

            <div class="method-card post">
              <div class="method-header">
                <span class="method-badge">POST</span>
                <h3>Create Data</h3>
              </div>
              <p>Send data to create something new (like writing a new page)</p>

              <div class="code-example">
                <div class="code-header">
                  <span class="code-file">pages/api/users.js</span>
                  <button class="copy-btn" onclick="copyCode(this)">
                    ğŸ“‹ Copy
                  </button>
                </div>
                <pre><code>export default function handler(req, res) {
  if (req.method === 'POST') {
    const { name, email } = req.body;
    
    const newUser = {
      id: Date.now(),
      name,
      email
    };
    
    res.status(201).json(newUser);
  }
}</code></pre>
              </div>

              <div class="usage-example">
                <strong>Frontend Usage:</strong>
                <pre><code>const response = await fetch('/api/users', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({ name: 'Charlie', email: 'charlie@email.com' })
});</code></pre>
              </div>
            </div>

            <div class="method-card put">
              <div class="method-header">
                <span class="method-badge">PUT</span>
                <h3>Update Data</h3>
              </div>
              <p>Modify existing data (like editing a page)</p>

              <div class="code-example">
                <div class="code-header">
                  <span class="code-file">pages/api/users/[id].js</span>
                  <button class="copy-btn" onclick="copyCode(this)">
                    ğŸ“‹ Copy
                  </button>
                </div>
                <pre><code>export default function handler(req, res) {
  const { id } = req.query;
  
  if (req.method === 'PUT') {
    const { name, email } = req.body;
    
    const updated = { id, name, email };
    
    res.status(200).json(updated);
  }
}</code></pre>
              </div>
            </div>

            <div class="method-card delete">
              <div class="method-header">
                <span class="method-badge">DELETE</span>
                <h3>Remove Data</h3>
              </div>
              <p>Delete data (like tearing out a page)</p>

              <div class="code-example">
                <div class="code-header">
                  <span class="code-file">pages/api/users/[id].js</span>
                  <button class="copy-btn" onclick="copyCode(this)">
                    ğŸ“‹ Copy
                  </button>
                </div>
                <pre><code>export default function handler(req, res) {
  const { id } = req.query;
  
  if (req.method === 'DELETE') {
    // Delete from database
    res.status(200).json({ 
      message: 'User deleted', 
      id 
    });
  }
}</code></pre>
              </div>
            </div>
          </div>

          <div class="status-codes">
            <h3>ğŸ“Š HTTP Status Codes</h3>
            <div class="status-grid">
              <div class="status-item success">
                <span class="status-code">200</span>
                <span class="status-name">OK</span>
                <span class="status-desc">Success!</span>
              </div>
              <div class="status-item success">
                <span class="status-code">201</span>
                <span class="status-name">Created</span>
                <span class="status-desc">New item created</span>
              </div>
              <div class="status-item error">
                <span class="status-code">400</span>
                <span class="status-name">Bad Request</span>
                <span class="status-desc">Invalid data sent</span>
              </div>
              <div class="status-item error">
                <span class="status-code">404</span>
                <span class="status-name">Not Found</span>
                <span class="status-desc">Resource doesn't exist</span>
              </div>
              <div class="status-item error">
                <span class="status-code">500</span>
                <span class="status-name">Server Error</span>
                <span class="status-desc">Something broke</span>
              </div>
            </div>
          </div>
        </div>

        <!-- Examples Tab -->
        <div id="examples" class="tab-content">
          <h2>ğŸ’¡ Real-World Examples</h2>

          <div class="example-section">
            <h3>1. User Authentication</h3>
            <div class="code-example">
              <div class="code-header">
                <span class="code-file">pages/api/auth/login.js</span>
                <button class="copy-btn" onclick="copyCode(this)">
                  ğŸ“‹ Copy
                </button>
              </div>
              <pre><code>export default async function handler(req, res) {
  if (req.method !== 'POST') {
    return res.status(405).json({ error: 'Method not allowed' });
  }

  const { email, password } = req.body;

  // Validate input
  if (!email || !password) {
    return res.status(400).json({ 
      error: 'Email and password required' 
    });
  }

  // Check credentials
  if (email === 'user@example.com' && password === 'password123') {
    return res.status(200).json({
      success: true,
      user: { email, name: 'John Doe' },
      token: 'jwt_token_here'
    });
  }

  res.status(401).json({ error: 'Invalid credentials' });
}</code></pre>
            </div>
          </div>

          <div class="example-section">
            <h3>2. Database Operations</h3>
            <div class="code-example">
              <div class="code-header">
                <span class="code-file">pages/api/products.js</span>
                <button class="copy-btn" onclick="copyCode(this)">
                  ğŸ“‹ Copy
                </button>
              </div>
              <pre><code>import { connectToDatabase } from '@/lib/mongodb';

export default async function handler(req, res) {
  const { db } = await connectToDatabase();

  if (req.method === 'GET') {
    // Fetch all products
    const products = await db
      .collection('products')
      .find({})
      .toArray();
    
    return res.status(200).json(products);
  }

  if (req.method === 'POST') {
    // Create new product
    const { name, price } = req.body;
    
    const result = await db
      .collection('products')
      .insertOne({ name, price, createdAt: new Date() });
    
    return res.status(201).json({ id: result.insertedId });
  }

  res.status(405).json({ error: 'Method not allowed' });
}</code></pre>
            </div>
          </div>

          <div class="example-section">
            <h3>3. External API Call</h3>
            <div class="code-example">
              <div class="code-header">
                <span class="code-file">pages/api/weather.js</span>
                <button class="copy-btn" onclick="copyCode(this)">
                  ğŸ“‹ Copy
                </button>
              </div>
              <pre><code>export default async function handler(req, res) {
  const { city } = req.query;

  if (!city) {
    return res.status(400).json({ 
      error: 'City parameter required' 
    });
  }

  try {
    const response = await fetch(
      `https://api.openweathermap.org/data/2.5/weather?q=${city}&appid=YOUR_KEY`
    );
    
    const data = await response.json();
    
    res.status(200).json({
      city: data.name,
      temperature: data.main.temp,
      description: data.weather[0].description
    });
  } catch (error) {
    res.status(500).json({ 
      error: 'Failed to fetch weather data' 
    });
  }
}</code></pre>
            </div>
          </div>

          <div class="example-section">
            <h3>4. Dynamic Routes</h3>
            <div class="code-example">
              <div class="code-header">
                <span class="code-file">pages/api/products/[id].js</span>
                <button class="copy-btn" onclick="copyCode(this)">
                  ğŸ“‹ Copy
                </button>
              </div>
              <pre><code>export default function handler(req, res) {
  const { id } = req.query;
  
  // GET /api/products/123 â†’ id = "123"
  
  const product = {
    id,
    name: `Product ${id}`,
    price: 99.99,
    stock: 50
  };
  
  res.status(200).json(product);
}</code></pre>
            </div>
          </div>

          <div class="best-practices-section">
            <h3>âœ… Best Practices</h3>
            <div class="practice-grid">
              <div class="practice-card good">
                <h4>âœ… DO</h4>
                <ul>
                  <li>âœ… Validate all input data</li>
                  <li>âœ… Handle errors gracefully</li>
                  <li>âœ… Use proper status codes</li>
                  <li>âœ… Secure sensitive data</li>
                  <li>âœ… Use environment variables</li>
                  <li>âœ… Implement rate limiting</li>
                </ul>
              </div>

              <div class="practice-card bad">
                <h4>âŒ DON'T</h4>
                <ul>
                  <li>âŒ Expose passwords/secrets</li>
                  <li>âŒ Skip input validation</li>
                  <li>âŒ Ignore error handling</li>
                  <li>âŒ Use synchronous operations</li>
                  <li>âŒ Return sensitive data</li>
                  <li>âŒ Forget CORS headers</li>
                </ul>
              </div>
            </div>
          </div>
        </div>

        <!-- Testing Tab -->
        <div id="testing" class="tab-content">
          <h2>ğŸ§ª Test Your API Routes</h2>

          <div class="testing-tool">
            <h3>Interactive API Tester</h3>
            <p>Try making API requests right here!</p>

            <div class="test-form">
              <div class="form-group">
                <label>HTTP Method:</label>
                <select id="method">
                  <option value="GET">GET</option>
                  <option value="POST">POST</option>
                  <option value="PUT">PUT</option>
                  <option value="DELETE">DELETE</option>
                </select>
              </div>

              <div class="form-group">
                <label>API Endpoint:</label>
                <input
                  type="text"
                  id="endpoint"
                  value="/api/hello"
                  placeholder="/api/endpoint" />
              </div>

              <div class="form-group" id="bodyGroup" style="display: none">
                <label>Request Body (JSON):</label>
                <textarea
                  id="requestBody"
                  rows="5"
                  placeholder='{"name": "John", "email": "john@example.com"}'></textarea>
              </div>

              <button class="test-btn" onclick="testAPI()">
                ğŸš€ Send Request
              </button>
            </div>

            <div class="test-results" id="testResults">
              <h4>Response:</h4>
              <div class="response-box">
                <pre id="responseOutput">
Click "Send Request" to test the API</pre
                >
              </div>
            </div>
          </div>

          <div class="testing-tools-info">
            <h3>ğŸ› ï¸ Testing Tools</h3>
            <div class="tools-grid">
              <div class="tool-card">
                <h4>ğŸ”µ Postman</h4>
                <p>Popular API testing tool</p>
                <a
                  href="https://www.postman.com/"
                  target="_blank"
                  class="tool-link"
                  >Download Postman</a
                >
              </div>
              <div class="tool-card">
                <h4>âš¡ Thunder Client</h4>
                <p>VS Code extension</p>
                <a
                  href="https://www.thunderclient.com/"
                  target="_blank"
                  class="tool-link"
                  >Get Extension</a
                >
              </div>
              <div class="tool-card">
                <h4>ğŸ± HTTPie</h4>
                <p>Command-line tool</p>
                <a href="https://httpie.io/" target="_blank" class="tool-link"
                  >Learn HTTPie</a
                >
              </div>
            </div>
          </div>

          <div class="curl-examples">
            <h3>ğŸ’» cURL Examples</h3>

            <div class="code-example">
              <div class="code-header">
                <span class="code-file">GET Request</span>
                <button class="copy-btn" onclick="copyCode(this)">
                  ğŸ“‹ Copy
                </button>
              </div>
              <pre><code>curl http://localhost:3000/api/users</code></pre>
            </div>

            <div class="code-example">
              <div class="code-header">
                <span class="code-file">POST Request</span>
                <button class="copy-btn" onclick="copyCode(this)">
                  ğŸ“‹ Copy
                </button>
              </div>
              <pre><code>curl -X POST http://localhost:3000/api/users \
  -H "Content-Type: application/json" \
  -d '{"name":"John","email":"john@example.com"}'</code></pre>
            </div>
          </div>
        </div>
      </div>

      <footer>
        <div class="footer-content">
          <h3>ğŸ“ Ready to Build APIs?</h3>
          <p>API Routes make Next.js a true full-stack framework!</p>
          <div class="footer-stats">
            <div class="stat">
              <div class="stat-value">Full-Stack</div>
              <div class="stat-label">in one app</div>
            </div>
            <div class="stat">
              <div class="stat-value">Easy</div>
              <div class="stat-label">to deploy</div>
            </div>
            <div class="stat">
              <div class="stat-value">$85K+</div>
              <div class="stat-label">avg salary</div>
            </div>
          </div>
          <div class="footer-actions">
            <a
              href="https://nextjs.org/docs/api-routes/introduction"
              target="_blank"
              class="btn-primary"
              >Learn More</a
            >
            <a
              href="https://nextjs.org/learn"
              target="_blank"
              class="btn-secondary"
              >Start Tutorial</a
            >
          </div>
          <div
            class="creator-section"
            style="
              margin-top: 2rem;
              padding-top: 2rem;
              border-top: 2px solid rgba(255, 255, 255, 0.1);
              text-align: center;
            ">
            <p style="font-size: 0.9rem; opacity: 0.9">
              Created by
              <a
                href="https://github.com/aakku106"
                target="_blank"
                style="color: #4fc3f7; text-decoration: none; font-weight: 600"
                >aakku106</a
              >
              - Making web development fun and accessible for everyone! ğŸš€
            </p>
          </div>
        </div>
      </footer>
    </div>

    <script src="script.js"></script>
  </body>
</html>
